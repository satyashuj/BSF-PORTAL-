<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BSF User Dashboard</title>
<link rel="stylesheet" href="user.css">
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f4f7fa;
    margin: 0;
  }
  .navbar {
    background: #003366;
    color: white;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 20px;
  }
  .navbar ul {
    list-style: none;
    display: flex;
    gap: 15px;
  }
  .navbar a, .navbar button {
    color: white;
    background: none;
    border: none;
    cursor: pointer;
    font-size: 16px;
    text-decoration: none;
  }
  .main-container {
    display: flex;
    justify-content: space-between;
    margin: 20px;
  }
  .left-panel {
    width: 70%;
  }
  .right-panel {
    width: 28%;
    background: white;
    padding: 15px;
    border-radius: 10px;
    box-shadow: 0 0 8px rgba(0,0,0,0.1);
  }
  .user-box {
    background: white;
    padding: 15px;
    margin-bottom: 20px;
    border-radius: 10px;
    box-shadow: 0 0 8px rgba(0,0,0,0.1);
  }
  #commandoList li {
    list-style: none;
    margin: 10px 0;
    display: flex;
    align-items: center;
    gap: 10px;
    background: #f9f9f9;
    padding: 8px;
    border-radius: 8px;
  }
  #commandoList img {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    object-fit: cover;
  }
  table {
    width: 100%;
    border-collapse: collapse;
  }
  table, th, td {
    border: 1px solid #ccc;
    text-align: center;
    padding: 8px;
  }
  footer {
    background: #003366;
    color: white;
    text-align: center;
    padding: 10px;
  }
  #clock {
    font-size: 22px;
    color: #003366;
    text-align: center;
    font-weight: bold;
    margin-bottom: 10px;
  }
  #calendar {
    text-align: center;
  }
</style>
</head>
<body>

<!-- ðŸ”¹ Navigation Bar -->
<nav class="navbar">
  <div class="logo-section">
    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQmPj0JPUJpbP4RPvxuLRY36ENmNicuW2_AcA&s" width="50" style="border-radius:50%">
    <strong>BSF Portal</strong>
  </div>
  <ul>
    <li><a href="#user-view">Home</a></li>
    <li><a href="#about">About</a></li>
    <li><a href="#contact">Contact</a></li>
    <li><input type="text" id="searchBox" placeholder="Search Commando..." onkeyup="searchCommando()"></li>
    <li><button onclick="logout()">Logout</button></li>
  </ul>
</nav>

<!-- ðŸ”¹ Main Section -->
<div class="main-container">
  <div class="left-panel">
    <!-- Commando List -->
    <section id="user-view" class="user-box">
      <h2>ðŸª– Commando Details</h2>
      <ul id="commandoList"></ul>
    </section>

    <!-- Schedule -->
    <section class="user-box">
      <h2>ðŸ“… Training Schedule</h2>
      <p id="scheduleInfo"></p>
    </section>

    <!-- Leave Details -->
    <section class="user-box">
      <h2>ðŸ•’ Leave Details</h2>
      <table id="leaveTable">
        <tr><th>Day</th><th>Leave Info</th></tr>
        <tr><td>Sunday</td><td>Weekly Off</td></tr>
        <tr><td>Wednesday</td><td>Half Day Leave</td></tr>
      </table>
    </section>
  </div>

  <!-- ðŸ”¹ Right Panel -->
  <div class="right-panel">
    <div id="clock"></div>
    <div id="calendar"></div>
  </div>
</div>

<!-- ðŸ”¹ About -->
<section id="about" class="user-box">
  <h2>About BSF</h2>
  <p>The Border Security Force (BSF) is India's first line of defense. It ensures border safety, conducts patrols, and upholds national security with valor and discipline.</p>
</section>

<!-- ðŸ”¹ Contact -->
<section id="contact" class="user-box">
  <h2>Contact</h2>
  <p>Email: info@bsf.gov.in | Phone: +91-9876543210</p>
</section>

<!-- ðŸ”¹ Footer -->
<footer>
  <p>Â© 2025 BSF Portal | All Rights Reserved</p>
  <p>Created by <strong>Satyanshu Saxena</strong></p>
</footer>

<!-- ðŸ”¹ Script -->
<script>
// Redirect if not logged in
if (localStorage.getItem("isUser") !== "true") {
  window.location.href = "user_login.html";
}

// ðŸ”¸ Load Data
const commandos = JSON.parse(localStorage.getItem("commandos")) || [];
const schedule = localStorage.getItem("schedule") || "No schedule available.";

// ðŸ”¹ Render Commando List
function renderCommandos() {
  const list = document.getElementById("commandoList");
  list.innerHTML = "";
  if (commandos.length === 0) {
    list.innerHTML = "<li>No commando data found.</li>";
    return;
  }

  commandos.forEach(c => {
    const li = document.createElement("li");
    li.innerHTML = `
      <img src="${c.photo}" alt="photo">
      <div>
        <strong>${c.name}</strong><br>
        ID: ${c.id}
      </div>
    `;
    list.appendChild(li);
  });
}

// ðŸ”¹ Render Schedule
document.getElementById("scheduleInfo").innerText = schedule;

// ðŸ”¹ Search Commando
function searchCommando() {
  const input = document.getElementById("searchBox").value.toLowerCase();
  const listItems = document.querySelectorAll("#commandoList li");
  listItems.forEach(item => {
    const text = item.textContent.toLowerCase();
    item.style.display = text.includes(input) ? "flex" : "none";
  });
}

// ðŸ”¹ Logout
function logout() {
  localStorage.removeItem("isUser");
  window.location.href = "logout_success.html";
}

// ðŸ”¹ Digital Clock
function updateClock() {
  const now = new Date();
  const time = now.toLocaleTimeString();
  document.getElementById("clock").innerText = "ðŸ•’ " + time;
}
setInterval(updateClock, 1000);
updateClock();

// ðŸ”¹ Calendar
function renderCalendar() {
  const now = new Date();
  const month = now.toLocaleString('default', { month: 'long' });
  const year = now.getFullYear();
  const date = now.getDate();

  let calendarHTML = `<h3>${month} ${year}</h3>`;
  calendarHTML += `<table style='width:100%; text-align:center; border-collapse:collapse;'>
      <tr><th>Su</th><th>Mo</th><th>Tu</th><th>We</th><th>Th</th><th>Fr</th><th>Sa</th></tr><tr>`;
  
  const firstDay = new Date(now.getFullYear(), now.getMonth(), 1).getDay();
  const daysInMonth = new Date(now.getFullYear(), now.getMonth() + 1, 0).getDate();

  for (let i = 0; i < firstDay; i++) calendarHTML += "<td></td>";

  for (let d = 1; d <= daysInMonth; d++) {
    if ((firstDay + d - 1) % 7 === 0) calendarHTML += "</tr><tr>";
    if (d === date) {
      calendarHTML += `<td style='background:#003366;color:white;border-radius:50%'>${d}</td>`;
    } else {
      calendarHTML += `<td>${d}</td>`;
    }
  }
  calendarHTML += "</tr></table>";
  document.getElementById("calendar").innerHTML = calendarHTML;
}
renderCalendar();

// Initialize
renderCommandos();
</script>

</body>
</html>
